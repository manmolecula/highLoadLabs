# BigDataFlink  
**–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ3: –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Apache Flink**

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ docker-compose
–ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `BigDataFlink-main`:
```bash
docker-compose up
```
### 2. –ó–∞–ø—É—Å–∫ flink_job

–ò–∑ –∫–æ—Ä–Ω—è BigDataFlink-main: 

```bash
BigDataFlink-main> docker exec -it jobmanager /bin/bash ./bin/sql-client.sh -f /opt/flink/sql_job/etl.sql
```
### 3. –ó–∞–ø—É—Å–∫ docker-compose

–ò–∑ –∫–æ—Ä–Ω—è BigDataFlink-main:

```bash
BigDataFlink-main> docker-compose --profile producer_runner up producer
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
### –°–≤—è–∑–∏ —Ç–∞–±–ª–∏—Ü:
![–°–≤—è–∑–∏ —Ç–∞–±–ª–∏—Ü](static/schema.png)
### –ò—Ç–æ–≥–æ–≤–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ:

```sql
SELECT 
    'dim_customer' as table_name, COUNT(*) as count FROM dim_customer
UNION ALL SELECT 
    'dim_seller', COUNT(*) FROM dim_seller
UNION ALL SELECT 
    'dim_product', COUNT(*) FROM dim_product
UNION ALL SELECT 
    'dim_store', COUNT(*) FROM dim_store
UNION ALL SELECT 
    'dim_supplier', COUNT(*) FROM dim_supplier
UNION ALL SELECT 
    'fact_sales', COUNT(*) FROM fact_sales;
```
![–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö](static/distribution.png)

##  –ó–∞–¥–∞–Ω–∏–µ
–ê–Ω–∞–ª–∏–∑ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö - –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ3 - Streaming processing —Å –ø–æ–º–æ—â—å—é Flink

–û–¥–Ω–∏–º –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ streaming processing —è–≤–ª—è–µ—Ç—Å—è Apache Flink. Apache Flink - –º–æ—â–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —à–∏—Ä–æ–∫–∏–π –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è streaming processing.

–ß—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å? 

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é Flink, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç —Ç–æ–ø–∏–∫ Kafka, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–∂–∏–º–µ streaming –≤ –º–æ–¥–µ–ª—å –∑–≤–µ–∑–¥–∞ –∏ –ø–∏—à–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ PostgreSQL. –î–∞–Ω–Ω—ã–µ –≤ Kafka-—Ç–æ–ø–∏–∫–∞—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ json. –î–∞–Ω–Ω—ã–µ –≤ —Ç–æ–ø–∏–∫ kafka –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, —ç–º—É–ª–∏—Ä—É—è –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö.

–ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Kafka?
 - –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Kafka-—Ç–æ–ø–∏–∫–µ - —ç—Ç–æ —Å—Ç—Ä–æ—á–∫–∞ –∏–∑ csv —Ñ–∞–π–ª–æ–≤, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–∞—è –≤ —Ñ–æ—Ä–º–∞—Ç json.

–ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ PostgreSQL?
 - –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –∑–≤–µ–∑–¥–∞.

![–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ3](https://github.com/user-attachments/assets/d3c1544d-3fe6-4c15-b673-9aa5d27dbd76)


–ê–ª–≥–æ—Ä–∏—Ç–º:

1. –ö–ª–æ–Ω–∏—Ä—É–µ—Ç–µ –∫ —Å–µ–±–µ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏ SQL (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é DBeaver).
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É —á–µ—Ä–µ–∑ docker).
4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ Apache Flink (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É —á–µ—Ä–µ–∑ Docker).
5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ Apache Kafka (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É —á–µ—Ä–µ–∑ Docker).
6. –°–∫–∞—á–∏–≤–∞–µ—Ç–µ —Ñ–∞–π–ª—ã —Å –∏—Å—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ mock_data( * ).csv, –≥–¥–µ ( * ) –Ω–æ–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤. –í—Å–µ–≥–æ 10 —Ñ–∞–π–ª–æ–≤, –∫–∞–∂–¥—ã–π –ø–æ 1000 —Å—Ç—Ä–æ–∫.
7. –†–µ–∞–ª–∏–∑—É–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ—á–∫—É –∏–∑ –∏—Å—Ö–æ–¥–Ω—ã—Ö csv-—Ñ–∞–π–ª–æ–≤ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ json –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –≤–∏–¥–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Kafka-—Ç–æ–ø–∏–∫.
8. –†–µ–∞–ª–∏–∑—É–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Flink, –∫–æ—Ç–æ—Ä–æ–µ —á–∏—Ç–∞–µ—Ç Kafka-—Ç–æ–ø–∏–∫, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–µ–ª—å –∑–≤–µ–∑–¥–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ PostgreSQL –≤ —Ä–µ–∂–∏–º–µ streaming.
9. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –∫–æ–Ω–µ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL.
10. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ —Ä–∞–±–æ—Ç—É –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –ª–∞–±–æ—Ä–∞–Ω—Ç–∞–º.

–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Ä–∞–±–æ—Ç—ã?

1. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ mock_data().csv, –≥–¥–µ () –Ω–æ–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤. –í—Å–µ–≥–æ 10 —Ñ–∞–π–ª–æ–≤, –∫–∞–∂–¥—ã–π –ø–æ 1000 —Å—Ç—Ä–æ–∫.
2. –§–∞–π–ª docker-compose.yml —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π PostgreSQL, Flink, Kafka –∏ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –∏–∑ —Ñ–∞–π–ª–æ–≤ mock_data(*).csv —Å–æ–∑–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è json –≤ Kafka.
3. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å Flink-–¥–∂–æ–±—É –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Kafka –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã.
4. –ö–æ–¥ Apache Flink –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∂–∏–º–µ streaming.
